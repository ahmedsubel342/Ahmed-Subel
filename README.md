<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶≤</title>
  <meta name="description" content="‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞ ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞, ‡¶∏‡ßá‡¶¨‡¶æ, ‡¶Ü‡¶™‡¶°‡ßá‡¶ü, ‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡¶∞ ‡¶ì ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‚Äî‡¶∏‡¶¨ ‡¶è‡¶ï ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ‡ßü‡•§" />
  <meta name="theme-color" content="#0ea5e9" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Crect rx='10' ry='10' width='48' height='48' fill='%230ea5e9'/%3E%3Cpath fill='white' d='M24 8a14 14 0 100 28 14 14 0 000-28zm0 4a10 10 0 110 20 10 10 0 010-20zm-2 5h4v12h-4V17zm0 14h4v4h-4v-4z'/%3E%3C/svg%3E" />
  <style>
    :root{--bg:#0b1120;--panel:#0f172a;--muted:#94a3b8;--text:#e2e8f0;--accent:#0ea5e9;--accent2:#22c55e;--warn:#ef4444;--card:#111827}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,Noto Sans,sans-serif;color:var(--text);background:linear-gradient(180deg,#0b1120 0%,#0f172a 100%);}
    a{color:var(--accent)}
    .container{width:min(1100px,100%);margin-inline:auto;padding:16px}
    header.nav{position:sticky;top:0;z-index:50;background:rgba(15,23,42,.8);backdrop-filter:saturate(140%) blur(10px);border-bottom:1px solid rgba(148,163,184,.15)}
    .nav-inner{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:12px 16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#60a5fa);display:grid;place-items:center;box-shadow:0 6px 20px rgba(14,165,233,.4)}
    .brand .logo svg{width:22px;height:22px}
    nav a{margin:0 10px;text-decoration:none;color:var(--text);opacity:.9}
    nav a:hover,nav a:focus{opacity:1;color:#fff}
    .cta{background:linear-gradient(135deg,var(--accent),#60a5fa);color:#0b1120;border:0;padding:10px 14px;border-radius:14px;font-weight:700;cursor:pointer;box-shadow:0 10px 20px rgba(14,165,233,.35)}

    .hero{padding:36px 16px 18px}
    .hero-grid{display:grid;grid-template-columns:1.25fr .75fr;gap:18px}
    .card{background:rgba(17,24,39,.85);border:1px solid rgba(148,163,184,.15);border-radius:18px;padding:18px;box-shadow:0 20px 50px rgba(0,0,0,.25)}
    .title{font-size:clamp(22px,3.2vw,36px);margin:.2em 0 .3em}
    .subtitle{color:var(--muted)}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;border:1px solid rgba(148,163,184,.25);padding:.12em .45em;border-radius:8px;background:rgba(2,6,23,.6)}

    .emergency{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}
    .em-item{display:flex;gap:12px;align-items:center;background:linear-gradient(180deg,#111827,#0b1220);border:1px solid rgba(148,163,184,.12);padding:14px;border-radius:14px}
    .em-item strong{font-size:18px}
    .em-item a{display:inline-flex;align-items:center;gap:8px;text-decoration:none}
    .badge{font-size:12px;padding:.15rem .5rem;border-radius:999px;border:1px solid rgba(148,163,184,.25);color:var(--muted)}

    .section{padding:22px 0}
    .section h2{font-size:clamp(18px,2.6vw,26px);margin:0 0 10px}

    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px}
    .service,.dir-card{background:linear-gradient(180deg,#0f172a,#0b1120);border:1px solid rgba(148,163,184,.12);border-radius:16px;padding:14px}
    .service h3{margin:.2em 0}
    .muted{color:var(--muted)}

    .toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:10px 0}
    input[type="text"], input[type="search"], select, textarea{width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(148,163,184,.2);background:#0b1220;color:var(--text)}
    .toolbar input, .toolbar select{max-width:280px}

    .dir-list{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    .dir-card h4{margin:.1em 0 .35em}
    .tag{display:inline-block;font-size:12px;margin-right:6px;margin-top:6px;padding:.15rem .45rem;border:1px solid rgba(148,163,184,.25);border-radius:999px;color:var(--muted)}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .btn{border:1px solid rgba(148,163,184,.25);background:#0b1220;color:var(--text);padding:8px 10px;border-radius:12px;cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--accent),#60a5fa);border:0;color:#0b1120;font-weight:700}
    .btn.success{background:linear-gradient(135deg,var(--accent2),#86efac);border:0;color:#052e16;font-weight:700}
    .btn.warn{background:linear-gradient(135deg,var(--warn),#fb7185);border:0;color:#450a0a;font-weight:700}

    .updates{display:grid;gap:12px}
    .update{border:1px solid rgba(148,163,184,.15);padding:12px;border-radius:14px;background:linear-gradient(180deg,#111827,#0b1120)}
    .update small{color:var(--muted)}

    .map-wrap iframe{width:100%;height:360px;border:0;border-radius:16px}

    .footer{margin-top:28px;padding:18px;border-top:1px solid rgba(148,163,184,.15);color:var(--muted);text-align:center}

    .sticky-call{position:fixed;right:16px;bottom:16px;z-index:60}

    @media (max-width: 900px){
      .hero-grid{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr 1fr}
      .dir-list{grid-template-columns:1fr}
      .emergency{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
    @media (max-width: 560px){
      nav{display:none}
      .grid{grid-template-columns:1fr}
    }

    @media print{
      header.nav,.sticky-call,.actions .btn{display:none!important}
      body{background:#fff;color:#000}
      .card,.service,.dir-card,.update{box-shadow:none;border:1px solid #ddd}
    }
  </style>
</head>
<body>
  <header class="nav" aria-label="‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶®">
    <div class="nav-inner container">
      <div class="brand" aria-label="‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°">
        <span class="logo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 3l7 4v10l-7 4-7-4V7l7-4z" fill="currentColor"/>
          </svg>
        </span>
        <span>‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶≤</span>
      </div>
      <nav>
        <a href="#home">‡¶π‡ßã‡¶Æ</a>
        <a href="#emergency">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</a>
        <a href="#services">‡¶∏‡ßá‡¶¨‡¶æ</a>
        <a href="#directory">‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø</a>
        <a href="#updates">‡¶Ü‡¶™‡¶°‡ßá‡¶ü</a>
        <a href="#map">‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡¶∞</a>
        <a href="#feedback">‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§</a>
      </nav>
      <button class="cta" onclick="document.getElementById('search').focus()">‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶® ‚åï</button>
    </div>
  </header>

  <main id="home" class="container">
    <section class="hero">
      <div class="hero-grid">
        <div class="card" role="region" aria-labelledby="hero-title">
          <div class="badge">‡¶¨‡¶ø‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡¶∞‡¶£</div>
          <h1 id="hero-title" class="title">‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞‚Äî‡¶∏‡¶¨ ‡¶∏‡ßá‡¶¨‡¶æ ‡¶è‡¶ï ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ‡ßü</h1>
          <p class="subtitle">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ, ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø/‡¶¨‡ßá‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶∏‡ßá‡¶¨‡¶æ, ‡¶Ü‡¶™‡¶°‡ßá‡¶ü, ‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡¶∞ ‡¶ì ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡•§ ‡¶è‡¶á ‡¶∏‡¶æ‡¶á‡¶ü‡¶ü‡¶ø ‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®-‡¶´‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶≤‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤-‡¶´‡¶æ‡¶∞‡ßç‡¶∏‡ßç‡¶ü ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®‡ßá ‡¶§‡ßà‡¶∞‡¶ø‡•§</p>
          <div class="toolbar">
            <input id="search" type="search" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏, ‡¶•‡¶æ‡¶®‡¶æ, ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤‚Ä¶" aria-label="‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö" />
            <select id="filterCat" aria-label="‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞">
              <option value="all">‡¶∏‡¶¨ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</option>
            </select>
            <button class="btn primary" onclick="scrollToId('directory')">‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø‡¶§‡ßá ‡¶Ø‡¶æ‡¶®</button>
            <span class="muted">‡¶ü‡¶ø‡¶™: <span class="kbd">/</span> ‡¶ö‡¶æ‡¶™‡¶≤‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ñ‡ßÅ‡¶≤‡¶¨‡ßá</span>
          </div>
        </div>
        <div class="card" id="emergency" role="region" aria-labelledby="em-title">
          <h2 id="em-title">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</h2>
          <div class="emergency" id="emergencyGrid" aria-live="polite"></div>
          <div class="actions">
            <button class="btn" onclick="addQuickEmergency()">‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button class="btn" onclick="resetEmergency()">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</button>
          </div>
          <p class="muted">‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø: 999 ‚Ä¢ ‡¶∏‡¶ø‡¶ü‡¶ø‡¶ú‡ßá‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏: 333 ‚Ä¢ ‡¶®‡¶æ‡¶∞‡ßÄ ‡¶ì ‡¶∂‡¶ø‡¶∂‡ßÅ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ: 109</p>
        </div>
      </div>
    </section>

    <section id="services" class="section">
      <h2>‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶∏‡ßá‡¶¨‡¶æ</h2>
      <div class="grid" id="serviceGrid"></div>
    </section>

    <section id="directory" class="section">
      <h2>‡¶∏‡ßá‡¶¨‡¶æ ‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø</h2>
      <div class="toolbar">
        <input id="dirSearch" type="search" placeholder="‡¶®‡¶æ‡¶Æ/‡¶è‡¶≤‡¶æ‡¶ï‡¶æ/‡¶∏‡ßá‡¶¨‡¶æ‚Ä¶" aria-label="‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®" />
        <select id="dirCat">
          <option value="all">‡¶∏‡¶¨</option>
        </select>
        <button class="btn success" onclick="openAddEntry()">‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <button class="btn" onclick="exportDirectory()">‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü (JSON)</button>
        <input id="importFile" type="file" accept="application/json" hidden />
        <button class="btn" onclick="document.getElementById('importFile').click()">‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
      </div>
      <div class="dir-list" id="dirList" aria-live="polite"></div>
    </section>

    <section id="updates" class="section">
      <h2>‡¶Ü‡¶™‡¶°‡ßá‡¶ü/‡¶ò‡ßã‡¶∑‡¶£‡¶æ</h2>
      <div class="toolbar">
        <input id="updTitle" type="text" placeholder="‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ" />
        <input id="updText" type="text" placeholder="‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ" />
        <button class="btn success" onclick="addUpdate()">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <button class="btn" onclick="clearUpdates()">‡¶∏‡¶¨ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®</button>
      </div>
      <div class="updates" id="updateList"></div>
    </section>

    <section id="map" class="section">
      <h2>‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡¶∞</h2>
      <div class="map-wrap card">
        <iframe title="‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡¶∞" src="https://www.openstreetmap.org/export/embed.html?bbox=90.75%2C22.88%2C90.92%2C23.02&amp;layer=mapnik" loading="lazy" referrerpolicy="no-referrer"></iframe>
        <p class="muted">‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‚Äî‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá <strong>iframe</strong> ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡ßá ‡¶¨‡¶æ‡¶â‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ø/‡¶ú‡ßÅ‡¶Æ ‡¶¨‡¶¶‡¶≤‡¶æ‡¶®‡•§</p>
      </div>
    </section>

    <section id="feedback" class="section">
      <h2>‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§/‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï</h2>
      <div class="grid">
        <form class="service" onsubmit="return submitFeedback(event)">
          <h3>‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®</h3>
          <label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ
            <input id="fbName" type="text" required />
          </label>
          <label>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤/‡¶á‡¶Æ‡ßá‡¶á‡¶≤
            <input id="fbContact" type="text" required />
          </label>
          <label>‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ
            <textarea id="fbMessage" rows="4" required></textarea>
          </label>
          <div class="actions">
            <button class="btn primary" type="submit">‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü</button>
            <button class="btn" type="reset">‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</button>
          </div>
          <p id="fbStatus" class="muted" aria-live="polite"></p>
        </form>
        <div class="service">
          <h3>‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá‡¶®</h3>
          <ul>
            <li><strong>‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</strong> ‡¶Ö‡¶Ç‡¶∂‡ßá ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶´‡ßã‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‚Äú‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‚Äù ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</li>
            <li><strong>‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø</strong>‡¶§‡ßá ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤/‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏/‡¶•‡¶æ‡¶®‡¶æ ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶°‡ßá‡¶ü‡¶æ <em>Export/Import</em> ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§</li>
            <li>‡¶∏‡¶¨ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶á ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶á‚Äî‡¶ï‡ßã‡¶° ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßá ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶¨‡¶¶‡¶≤‡¶æ‡¶®‡•§</li>
            <li>‡¶°‡¶ø‡¶™‡ßç‡¶≤‡¶Ø‡¶º: ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶è‡¶á ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶Ø‡ßá ‡¶ï‡ßã‡¶® ‡¶π‡ßã‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç‡ßü‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶Ø‡ßá‡¶Æ‡¶® GitHub Pages, Netlify)‡•§</li>
          </ul>
          <p class="muted">‡¶¶‡ßç‡¶∞‡¶∑‡ßç‡¶ü‡¶¨‡ßç‡¶Ø: ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡¶æ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ó‡ßÅ‡¶≤‡ßã ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡ßá ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‚Äî‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        </div>
        <div class="service">
          <h3>‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ</h3>
          <p class="muted">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø ‡¶ì ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ <em>localStorage</em> ‡¶è ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‚Äî‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®‡•§ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶®‡¶æ‡•§</p>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>¬© <span id="year"></span> ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶≤ ‚Ä¢ ‡¶®‡¶ø‡¶∞‡ßç‡¶Æ‡¶æ‡¶£ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡¶ø‡¶Æ</p>
    </footer>
  </main>

  <div class="sticky-call" aria-hidden="false">
    <a class="cta" href="tel:999" title="999 ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶ï‡¶≤ 999</a>
  </div>

  <!-- Dialogs -->
  <dialog id="entryDialog">
    <form method="dialog" class="card" style="max-width:560px">
      <h3>‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡¶ø‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶∞‡¶ø ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h3>
      <div class="grid" style="grid-template-columns:1fr 1fr">
        <label>‡¶®‡¶æ‡¶Æ<input id="enName" type="text" required /></label>
        <label>‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø
          <select id="enCat" required></select>
        </label>
        <label>‡¶è‡¶≤‡¶æ‡¶ï‡¶æ/‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ<input id="enArea" type="text" required /></label>
        <label>‡¶´‡ßã‡¶® (‡¶ï‡¶≤‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø)<input id="enPhone" type="tel" placeholder="01xxxxxxxxx" /></label>
        <label>WhatsApp (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)<input id="enWa" type="tel" placeholder="01xxxxxxxxx" /></label>
        <label>‡¶ì‡¶Ø‡¶º‡ßá‡¶¨/‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)<input id="enWeb" type="url" placeholder="https://" /></label>
      </div>
      <label>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£
        <textarea id="enDesc" rows="3" placeholder="‡¶∏‡ßá‡¶¨‡¶æ, ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡¶ø ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø"></textarea>
      </label>
      <div class="actions">
        <button class="btn" value="cancel">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
        <button class="btn success" id="enSave" value="default">‡¶∏‡ßá‡¶≠</button>
      </div>
    </form>
  </dialog>

  <dialog id="emDialog">
    <form method="dialog" class="card" style="max-width:520px">
      <h3>‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
      <div class="grid" style="grid-template-columns:1fr 1fr">
        <label>‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ<input id="emTitle" type="text" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∏‡¶¶‡¶∞ ‡¶•‡¶æ‡¶®‡¶æ" required /></label>
        <label>‡¶´‡ßã‡¶®<input id="emPhone" type="tel" placeholder="‡¶ï‡¶≤‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞" required /></label>
        <label>‡¶®‡ßã‡¶ü (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)<input id="emNote" type="text" placeholder="‡¶°‡¶ø‡¶â‡¶ü‡¶ø ‡¶Ö‡¶´‡¶ø‡¶∏‡¶æ‡¶∞, ‡ß®‡ß™/‡ß≠" /></label>
        <label>‡¶ü‡¶æ‡¶á‡¶™
          <select id="emType">
            <option>‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂</option>
            <option>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏</option>
            <option>‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤</option>
            <option>‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏</option>
            <option>‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡ßÅ‡ßé</option>
            <option>‡¶ó‡ßç‡¶Ø‡¶æ‡¶∏</option>
            <option>‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
          </select>
        </label>
      </div>
      <div class="actions">
        <button class="btn" value="cancel">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
        <button class="btn success" id="emSave" value="default">‡¶∏‡ßá‡¶≠</button>
      </div>
    </form>
  </dialog>

  <script>
    // --- Data (starter) --- //
    const DEFAULT_EMERGENCY = [
      { title: '‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø (Police/Fire/Ambulance)', phone: '999', type: '‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º', note: '‡ß®‡ß™/‡ß≠' },
      { title: '‡¶∏‡¶ø‡¶ü‡¶ø‡¶ú‡ßá‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏', phone: '333', type: '‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º', note: '‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶§‡¶•‡ßç‡¶Ø/‡¶∏‡ßá‡¶¨‡¶æ' },
      { title: '‡¶®‡¶æ‡¶∞‡ßÄ ‡¶ì ‡¶∂‡¶ø‡¶∂‡ßÅ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ', phone: '109', type: '‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º', note: '' },
      { title: '‡¶ü‡ßã‡¶≤-‡¶´‡ßç‡¶∞‡¶ø ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶∏‡ßá‡¶¨‡¶æ', phone: '16263', type: '‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º', note: '‡¶π‡ßá‡¶≤‡¶•‡¶≤‡¶æ‡¶á‡¶®' }
    ];

    const CATEGORIES = ['‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤','‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏','‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂','‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏','‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®','‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∏‡¶ø','‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶Ö‡¶´‡¶ø‡¶∏','‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®','‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡ßÅ‡ßé/‡¶ó‡ßç‡¶Ø‡¶æ‡¶∏','‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø'];

    // Sample starter directory (placeholders‚Äîreplace with verified local info)
    const STARTER_DIR = [
      { name:'‡ß®‡ß´‡ß¶ ‡¶∂‡¶Ø‡ßç‡¶Ø‡¶æ ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶≤ ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤, ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞', cat:'‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤', area:'‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞', phone:'', wa:'', web:'', desc:'‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó, ‡¶¨‡¶π‡¶ø‡¶∞‡ßç‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‚Äî‡¶∏‡¶Æ‡ßü‡¶∏‡ßÇ‡¶ö‡¶ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®' },
      { name:'‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞ ‡¶Æ‡¶°‡ßá‡¶≤ ‡¶•‡¶æ‡¶®‡¶æ', cat:'‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂', area:'‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞', phone:'', wa:'', web:'', desc:'‡¶°‡¶ø‡¶â‡¶ü‡¶ø ‡¶Ö‡¶´‡¶ø‡¶∏‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®' },
      { name:'‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ì ‡¶∏‡¶ø‡¶≠‡¶ø‡¶≤ ‡¶°‡¶ø‡¶´‡ßá‡¶®‡ßç‡¶∏, ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞', cat:'‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏', area:'‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞', phone:'', wa:'', web:'', desc:'‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶°‡¶ø‡¶â‡¶ü‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®' },
      { name:'‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ (‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶ü)', cat:'‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏', area:'‡¶∏‡¶¶‡¶∞', phone:'', wa:'', web:'', desc:'‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®' },
    ];

    // --- Utility --- //
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    const store = {
      get(k, fallback){ try{ return JSON.parse(localStorage.getItem(k)) ?? fallback }catch{ return fallback } },
      set(k, v){ localStorage.setItem(k, JSON.stringify(v)) }
    };

    function telLink(num){ return `tel:${num.replace(/\s|-/g,'')}` }
    function waLink(num){ return `https://wa.me/88${num.replace(/\s|-/g,'')}` }
    function scrollToId(id){ document.getElementById(id)?.scrollIntoView({behavior:'smooth'}) }

    // Keyboard: focus search with /
    window.addEventListener('keydown', e=>{ if(e.key==='/' && !/input|textarea/i.test(document.activeElement.tagName)){ e.preventDefault(); $('#search').focus() } })

    // --- Emergency Section --- //
    function loadEmergency(){
      const list = store.get('emergencyList', DEFAULT_EMERGENCY);
      renderEmergency(list);
    }
    function renderEmergency(list){
      const grid = $('#emergencyGrid');
      grid.innerHTML = '';
      list.forEach(item => {
        const el = document.createElement('div');
        el.className = 'em-item';
        el.innerHTML = `
          <div>
            <div class="badge">${item.type||'‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø'}</div>
            <strong>${item.title}</strong>
            <div class="muted">${item.note||''}</div>
          </div>
          <div style="margin-left:auto" class="actions">
            ${item.phone?`<a class="btn primary" href="${telLink(item.phone)}" aria-label="‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶® ${item.phone}">‡¶ï‡¶≤: ${item.phone}</a>`:''}
            ${item.phone?`<a class="btn" target="_blank" rel="noopener" href="${waLink(item.phone)}">WhatsApp</a>`:''}
          </div>`;
        grid.appendChild(el);
      })
    }
    function addQuickEmergency(){
      const dlg = document.getElementById('emDialog');
      dlg.returnValue='';
      dlg.showModal();
      document.getElementById('emSave').onclick = () => {
        const title = $('#emTitle').value.trim();
        const phone = $('#emPhone').value.trim();
        const note = $('#emNote').value.trim();
        const type = $('#emType').value.trim();
        if(!title || !phone){ return }
        const list = store.get('emergencyList', DEFAULT_EMERGENCY);
        list.push({title, phone, note, type});
        store.set('emergencyList', list);
        renderEmergency(list);
        dlg.close();
        $('#emTitle').value = $('#emPhone').value = $('#emNote').value = '';
      }
    }
    function resetEmergency(){ store.set('emergencyList', DEFAULT_EMERGENCY); renderEmergency(DEFAULT_EMERGENCY) }

    // --- Services (static) --- //
    const SERVICES = [
      {icon:'üè•', title:'‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø', text:'‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤, ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶ø‡¶ï, ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏' },
      {icon:'üëÆ‚Äç‚ôÇÔ∏è', title:'‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ', text:'‡¶•‡¶æ‡¶®‡¶æ, ‡¶¨‡¶ø‡¶ü ‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂‡¶ø‡¶Ç, ‡¶ü‡ßç‡¶∞‡¶æ‡¶´‡¶ø‡¶ï' },
      {icon:'üî•', title:'‡¶¶‡ßÅ‡¶∞‡ßç‡¶Ø‡ßã‡¶ó', text:'‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏, ‡¶∏‡¶ø‡¶≠‡¶ø‡¶≤ ‡¶°‡¶ø‡¶´‡ßá‡¶®‡ßç‡¶∏' },
      {icon:'üèõÔ∏è', title:'‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶∏‡ßá‡¶¨‡¶æ', text:'‡¶á‡¶â‡¶®‡¶ø‡¶Ø‡¶º‡¶® ‡¶™‡¶∞‡¶ø‡¶∑‡¶¶, ‡¶™‡¶æ‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü, ‡¶ú‡¶®‡ßç‡¶Æ ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶®' },
      {icon:'üí°', title:'‡¶á‡¶â‡¶ü‡¶ø‡¶≤‡¶ø‡¶ü‡¶ø', text:'‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡ßÅ‡ßé, ‡¶ó‡ßç‡¶Ø‡¶æ‡¶∏, ‡¶™‡¶æ‡¶®‡¶ø' },
      {icon:'ü©∏', title:'‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®', text:'‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™, ‡¶∏‡¶Ç‡¶ó‡¶†‡¶®' }
    ];
    function renderServices(){
      const grid = document.getElementById('serviceGrid');
      grid.innerHTML = SERVICES.map(s=>`<div class="service"><div class="badge">${s.icon}</div><h3>${s.title}</h3><p class="muted">${s.text}</p></div>`).join('');
    }

    // --- Directory --- //
    function initCategories(){
      const set = new Set(CATEGORIES);
      store.get('directory', STARTER_DIR).forEach(d=>set.add(d.cat));
      const cats = Array.from(set);
      const sel1 = document.getElementById('dirCat');
      const sel2 = document.getElementById('enCat');
      const sel3 = document.getElementById('filterCat');
      cats.forEach(c=>{
        const o1 = new Option(c,c); sel1.add(o1);
        const o2 = new Option(c,c); sel2.add(o2);
        const o3 = new Option(c,c); sel3.add(o3);
      });
    }

    function renderDirectory(){
      const q = ($('#dirSearch').value || $('#search').value || '').toLowerCase();
      const cat = document.getElementById('dirCat').value;
      const data = store.get('directory', STARTER_DIR);
      const list = document.getElementById('dirList');
      const filtered = data.filter(d=>{
        const matchQ = `${d.name} ${d.area} ${d.desc}`.toLowerCase().includes(q);
        const matchC = cat==='all' || d.cat===cat;
        return matchQ && matchC;
      });
      if(!filtered.length){ list.innerHTML = `<div class="muted">‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶®‡ßá‡¶á‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>`; return }
      list.innerHTML = filtered.map(d=>`
        <div class="dir-card" role="article" aria-label="${d.name}">
          <div class="badge">${d.cat}</div>
          <h4>${d.name}</h4>
          <div class="muted">${d.area||''}</div>
          <p>${d.desc||''}</p>
          <div class="actions">
            ${d.phone?`<a class="btn primary" href="${telLink(d.phone)}">‡¶ï‡¶≤: ${d.phone}</a>`:''}
            ${d.wa?`<a class="btn" target="_blank" rel="noopener" href="${waLink(d.wa)}">WhatsApp</a>`:''}
            ${d.web?`<a class="btn" target="_blank" rel="noopener" href="${d.web}">‡¶ì‡¶Ø‡¶º‡ßá‡¶¨</a>`:''}
            <button class="btn" onclick='editEntry(${JSON.stringify(d.name)})'>‡¶è‡¶°‡¶ø‡¶ü</button>
            <button class="btn warn" onclick='deleteEntry(${JSON.stringify(d.name)})'>‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>
          </div>
        </div>`).join('');
    }

    function openAddEntry(){
      const dlg = document.getElementById('entryDialog');
      dlg.returnValue='';
      dlg.showModal();
      document.getElementById('enSave').onclick = () => {
        const item = {
          name: $('#enName').value.trim(),
          cat: $('#enCat').value,
          area: $('#enArea').value.trim(),
          phone: $('#enPhone').value.trim(),
          wa: $('#enWa').value.trim(),
          web: $('#enWeb').value.trim(),
          desc: $('#enDesc').value.trim(),
        };
        if(!item.name) return;
        const data = store.get('directory', STARTER_DIR);
        const exists = data.find(d=>d.name===item.name);
        if(exists){ Object.assign(exists, item) } else { data.push(item) }
        store.set('directory', data);
        renderDirectory();
        dlg.close();
        ['#enName','#enArea','#enPhone','#enWa','#enWeb','#enDesc'].forEach(s=>$(s).value='');
      }
    }

    function editEntry(name){
      const data = store.get('directory', STARTER_DIR);
      const d = data.find(x=>x.name===name);
      if(!d) return;
      const dlg = document.getElementById('entryDialog');
      $('#enName').value = d.name;
      $('#enCat').value = d.cat;
      $('#enArea').value = d.area;
      $('#enPhone').value = d.phone;
      $('#enWa').value = d.wa;
      $('#enWeb').value = d.web;
      $('#enDesc').value = d.desc;
      dlg.showModal();
      document.getElementById('enSave').onclick = () => {
        Object.assign(d, {
          name: $('#enName').value.trim(),
          cat: $('#enCat').value,
          area: $('#enArea').value.trim(),
          phone: $('#enPhone').value.trim(),
          wa: $('#enWa').value.trim(),
          web: $('#enWeb').value.trim(),
          desc: $('#enDesc').value.trim(),
        });
        store.set('directory', data);
        renderDirectory();
        dlg.close();
      }
    }

    function deleteEntry(name){
      if(!confirm('‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?')) return;
      const data = store.get('directory', STARTER_DIR).filter(d=>d.name!==name);
      store.set('directory', data);
      renderDirectory();
    }

    function exportDirectory(){
      const data = store.get('directory', STARTER_DIR);
      const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'lakshmipur-directory.json'; a.click();
      URL.revokeObjectURL(url);
    }

    document.getElementById('importFile').addEventListener('change', (e)=>{
      const file = e.target.files[0]; if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{
        try{ const json = JSON.parse(reader.result); store.set('directory', json); renderDirectory() }
        catch{ alert('‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï JSON ‡¶®‡¶Ø‡¶º'); }
      };
      reader.readAsText(file);
    });

    // --- Updates --- //
    function addUpdate(){
      const t = $('#updTitle').value.trim();
      const m = $('#updText').value.trim();
      if(!t || !m) return;
      const list = store.get('updates', []);
      list.unshift({t, m, time: new Date().toISOString()});
      store.set('updates', list);
      $('#updTitle').value = $('#updText').value = '';
      renderUpdates();
    }
    function renderUpdates(){
      const list = store.get('updates', []);
      const box = document.getElementById('updateList');
      if(!list.length){ box.innerHTML = '<div class="muted">‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶®‡ßá‡¶á‡•§</div>'; return }
      box.innerHTML = list.map(u=>`<div class="update"><strong>${u.t}</strong><div class="muted">${new Date(u.time).toLocaleString()}</div><p>${u.m}</p></div>`).join('');
    }
    function clearUpdates(){ if(confirm('‡¶∏‡¶¨ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?')){ store.set('updates', []); renderUpdates() } }

    // --- Feedback (demo only) --- //
    function submitFeedback(e){
      e.preventDefault();
      const name = $('#fbName').value.trim();
      const contact = $('#fbContact').value.trim();
      const msg = $('#fbMessage').value.trim();
      const f = store.get('feedback', []);
      f.push({name, contact, msg, time: new Date().toISOString()});
      store.set('feedback', f);
      $('#fbStatus').textContent = '‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá)';
      e.target.reset();
      return false;
    }

    // --- Wiring --- //
    function init(){
      document.getElementById('year').textContent = new Date().getFullYear();
      initCategories();
      renderServices();
      loadEmergency();
      renderDirectory();
      renderUpdates();
      ['#search','#dirSearch','#dirCat'].forEach(sel=> $(sel)?.addEventListener('input', renderDirectory));
    }

    // Accessibility: close dialogs with Esc (native supported), focus trap simple
    ['entryDialog','emDialog'].forEach(id=>{
      const dlg = document.getElementById(id);
      dlg?.addEventListener('click', e=>{ if(e.target===dlg) dlg.close() })
    });

    // Kickoff
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
